"use strict";class LapTable{constructor(){this.laps=[],this.container=document.getElementById("table-wrapper"),this.tbody=document.getElementById("tbody-laps")}lap(t){let e=0;0!=this.laps.length&&(e=this.laps[this.laps.length-1].end);let s={start:e,end:t};this.laps.push(s),this.insertLine(s),"none"===this.container.style.display&&this.laps.length>0&&this.show(!0)}insertLine(t){let e=document.createElement("tr");e.className="lap";let s=document.createElement("td");e.appendChild(s),s.innerHTML=this.laps.length.toString();let n=timeF(t.start),l=document.createElement("td");l.innerHTML=`${leftPad(n.minutes,2)}:${leftPad(n.seconds,2)}:${leftPad(n.milliseconds,3)}`,e.appendChild(l);let i=document.createElement("td"),a=timeF(t.end);i.innerHTML=`${leftPad(a.minutes,2)}:${leftPad(a.seconds,2)}:${leftPad(a.milliseconds,3)}`,e.appendChild(i),this.tbody.prepend(e)}show(t){this.container.style.display=t?"block":"none"}reset(){this.laps=[],this.show(!1),this.container.style.display="none"}}class Control{constructor(){this.btn_start=document.getElementById("btn-start"),this.btn_continue=document.getElementById("btn-continue"),this.btn_pause=document.getElementById("btn-pause"),this.btn_reset=document.getElementById("btn-reset"),this.btn_lap=document.getElementById("btn-lap")}onPlay(){this.reset(),this.btn_pause.style.display="block",this.btn_lap.style.display="block"}onReset(){this.reset(),this.btn_start.style.display="block"}onPause(){this.reset(),this.btn_continue.style.display="block",this.btn_reset.style.display="block"}reset(){let t=document.getElementsByClassName("stopwatch-button");for(let e=0;e<t.length;e++)t[e].setAttribute("style","display: none")}}class Display{constructor(){this.display=document.getElementById("display")}setTime(t,e,s){this.display.innerHTML=leftPad(t,2)+":"+leftPad(e,2)+"."+leftPad(parseFloat(s.toString().substring(0,2)),2)}}function $(t){window.addEventListener("load",()=>t())}$(()=>{var t,e,s,n,l;let i=document.getElementById("table-wrapper"),a=document.getElementById("table-lap");window.addEventListener("resize",t=>{a.style.height=i.style.height});let r=new LapTable,d=new Display,o=new Control,h=new Stopwatch(d,o,r);null===(t=document.getElementById("btn-start"))||void 0===t||t.addEventListener("click",()=>h.play()),null===(e=document.getElementById("btn-continue"))||void 0===e||e.addEventListener("click",()=>h.continue()),null===(s=document.getElementById("btn-pause"))||void 0===s||s.addEventListener("click",()=>h.pause()),null===(n=document.getElementById("btn-reset"))||void 0===n||n.addEventListener("click",()=>h.reset()),null===(l=document.getElementById("btn-lap"))||void 0===l||l.addEventListener("click",()=>h.lap())});class Stopwatch{constructor(t,e,s){this.time=0,this.beforeTime=0,this.interval_id=NaN,this.display=t,this.table=s,this.constroller=e}clock(){let t=Date.now(),e=t-this.beforeTime;this.time+=e,this.render(),this.beforeTime=t}play(){isNaN(this.interval_id)&&(this.beforeTime=Date.now(),this.constroller.onPlay(),this.interval_id=setInterval(()=>{this.clock()},DELAY))}pause(){isNaN(this.interval_id)||(clearInterval(this.interval_id),this.interval_id=NaN,this.constroller.onPause())}continue(){this.play(),this.constroller.onPlay()}reset(){this.pause(),this.time=0,this.render(),this.table.reset(),this.constroller.onReset()}lap(){this.table.lap(this.time)}render(){let{minutes:t,seconds:e,milliseconds:s}=timeF(this.time);this.display.setTime(t,e,s)}}const SECONDS=1e3,MINUTES=6e4,HOURS=36e5,DELAY=10;function leftPad(t,e){var s=""+t,n="0".repeat(e);return n.substring(0,n.length-s.length)+s}function timeF(t){return{minutes:Math.floor(t%36e5/6e4),seconds:Math.floor(t%6e4/1e3),milliseconds:t%1e3}}